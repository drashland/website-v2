---
title: Chains - Request Chain - Create the Chain
---

import { Callout, FileTree, Steps, Tab, Tabs } from "nextra/components";
import { Link } from "@/src/components/nextra/Link";

# Create the Chain

## Before You Get Started

In this tutorial, we will show you how to create a simple HTTP application that can receive requests and send responses using the `RequestChain` module.

### Prerequisites

- Complete the steps outlined on the [Prerequisites](../../getting-started/prerequisites) page
- Read our concepts on [chains](../../concepts/chains) and [resources](../../concepts/resources)

### Objectives

To gain familiarity with:

- Drash's `RequestChain` (in an asynchronous way);
- how it can be used in different runtimes;
- how you can use resources to handle requests; and
- how you can send responses based on those requests.

## Steps

After completing the steps in this section, your project's directory should look like the directory tree below. _Note: We have `.ts` extensions in these directory tree sections by default. If you are using JavaScript, then the extensions would be `.js`._

<FileTree>
  <FileTree.Folder name="path/to/your/project" defaultOpen>
    <FileTree.File name="app.ts" />
  </FileTree.Folder>
</FileTree>

<Tabs items={["Deno (TS ESM)"]}>
<Tab>
<Steps>

### Build the Chain

The chain below has a `Home` resource that's accessible at the `/` path. Resources haven't been discussed yet, but we wanted to give you a working chain for the [Verification](#verification) section below. Otherwise, it would only throw `404 Not Found` errors. Creating resources are discussed on the [Resources > Create Resources](../resources) page.

The code comments explain the code in a line-by-line manner.

```typescript showLineNumbers filename="path/to/project/app.ts" copy
// Drash imports
import * as RequestChain from "https://esm.sh/@drashland/drash@v3.0.0-beta.01/esm/modules/RequestChain/native.ts";

// Deno imports
import { serve } from "https://deno.land/std/http/server.ts";

// Create a simple resource that we can use to verify the application works
class Home extends RequestChain.Resource {
  public paths = ["/"];

  public GET(request: Request): Response {
    const { method, url } = request;
    const date = new Date();

    return new Response(       // This response will end up in the chain's `.then()` block.
      `Request received: ` +
      `${method} ${url}` +
      `\nWritten at: ${date}`
    );
  }
}

const chain = RequestChain
  .builder()                    // Get the chain's builder so we can build the chain easily.
  .resources(
    Home,                       // Add the `Home` resource to the chain.
  )
  .build<Request, Response>();  // Build the chain.

const hostname = "localhost";   // Define the HTTP server's hostname
const port = 1447;              // Define the HTTP serer's port

const serveHandler = (          // Create the handler that Deno will use.
  request: Request              // This handler will receive a `Request` object from Deno.
): Promise<Response> => {       // Deno expects you to return a `Response` object, so the return
                                // is defined as such. Since this chain's handlers return `Promise`
                                // objects, the return type is `Promise<Response>`.

  return chain.handle(request)  // Pass the `Request` object to the chain.

    .then((response) => {       // The chain will return the `Response` object from the resource.
      console.log(response)     // We can log it just for debugging purposes.
      return response;          // Since Deno expects a `Response` object, we can return it as is.
    })

    .catch((e: Error) => {      // If the chain throws an error, we need to catch it and handle it.
      console.log(e);           // This entire `.catch()` block is a simple error handler and is not
                                // suitable for the real world. To learn more about error handling,
      return new Response(      // check out the Error Handling pages in the left sidebar.
        e.message,
        { status: 500 }
      );
    });
};

console.log(`\nDrash is running at http://${hostname}:${port}`);

await serve(serveHandler, { port });
```

</Steps>
</Tab>
</Tabs>

## Verification

### Run Your Code

Please refer to your chosen runtime's documentation pages for steps on running the above `app.ts` file (or `app.js` file if you are using JavaScript).

### Verify Your Code

<Callout type="info" emoji={null}>
If you see `HTTPError: Not Found` in the terminal where you are running your code, it is most likely from a `favicon.ico` request from your browser.
</Callout>

Once your app is running, you can go to `http://localhost:1447` in your browser.

You should see something similar to the following:

```
Request received: GET http://localhost:1447/
Written at: Sun Aug 20 2023 19:47:48 GMT-0400 (Eastern Daylight Time)
```

## Next Steps

Feel free to follow our recommendation or navigate the documentation pages at your leisure.

### Our Recommendations

- [Add more resources](./add-resources) to your chain
{/* - Learn about [basic error handling](../../error-handling/basics) */}
